<!DOCTYPE html>
<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BL152KSG7H"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BL152KSG7H');
</script>

  <link rel="canonical" href="https://alper.tech/"/>
  <meta charset="utf-8">
  

  
  <title>Code is Liability</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Code is Liability">
<meta property="og:url" content="https://alper.tech/index.html">
<meta property="og:site_name" content="Code is Liability">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Alper Sunar">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Code is Liability" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Code is Liability</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://alper.tech"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Applied-Problem-Solving" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2024/11/29/Applied-Problem-Solving/" class="article-date">
  <time datetime="2024-11-30T01:02:16.000Z" itemprop="datePublished">2024-11-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2024/11/29/Applied-Problem-Solving/">Applied Problem Solving</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Recently I had some free time and decided to checkout a few questions from LeetCode.<br><a href=""><img src="/images/fellow_kids.gif"></a></p>
<p>Struggled and relearned a few insights during this experiment so writing them down for my future self.</p>
<p>The idea is to document the unfiltered process, revisit what worked and what did not to improve problem solving skills.</p>
<p>Here’s how it went down along with some relevant commentary.</p>
<p>Picked a medium level problem about rotating a box that may contain stone(s), stationary object(s), obstacle(s) or empty space. The details:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">You are given an m x n matrix of characters box representing a side-view of a box. Each cell of the </span></span><br><span class="line"><span class="comment">box is one of the following:</span></span><br><span class="line"><span class="comment">    A stone &#x27;#&#x27;</span></span><br><span class="line"><span class="comment">    A stationary obstacle &#x27;*&#x27;</span></span><br><span class="line"><span class="comment">    Empty &#x27;.&#x27;</span></span><br><span class="line"><span class="comment">The box is rotated 90 degrees clockwise, causing some of the stones to fall due to gravity. Each </span></span><br><span class="line"><span class="comment">stone falls down until it lands on an obstacle, another stone, or the bottom of the box. Gravity </span></span><br><span class="line"><span class="comment">does not affect the obstacles&#x27; positions, and the inertia from the box&#x27;s rotation does not affect </span></span><br><span class="line"><span class="comment">the stones&#x27; horizontal positions.</span></span><br><span class="line"><span class="comment">It is guaranteed that each stone in box rests on an obstacle, another stone, or the bottom of the </span></span><br><span class="line"><span class="comment">box.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Return an n x m matrix representing the box after the rotation described above.</span></span><br><span class="line"><span class="comment">Input: box = [[&quot;#&quot;,&quot;.&quot;,&quot;#&quot;]]</span></span><br><span class="line"><span class="comment">Output: [[&quot;.&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;]]</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">Input: box = [[&quot;#&quot;,&quot;.&quot;,&quot;*&quot;,&quot;.&quot;],</span></span><br><span class="line"><span class="comment">              [&quot;#&quot;,&quot;#&quot;,&quot;*&quot;,&quot;.&quot;]]</span></span><br><span class="line"><span class="comment">Output: [[&quot;#&quot;,&quot;.&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;,&quot;#&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;*&quot;,&quot;*&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;.&quot;,&quot;.&quot;]]</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">Input: box = [[&quot;#&quot;,&quot;#&quot;,&quot;*&quot;,&quot;.&quot;,&quot;*&quot;,&quot;.&quot;],</span></span><br><span class="line"><span class="comment">              [&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;*&quot;,&quot;.&quot;,&quot;.&quot;],</span></span><br><span class="line"><span class="comment">              [&quot;#&quot;,&quot;#&quot;,&quot;#&quot;,&quot;.&quot;,&quot;#&quot;,&quot;.&quot;]]</span></span><br><span class="line"><span class="comment">Output: [[&quot;.&quot;,&quot;#&quot;,&quot;#&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;.&quot;,&quot;#&quot;,&quot;#&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;,&quot;#&quot;,&quot;*&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;,&quot;*&quot;,&quot;.&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;,&quot;.&quot;,&quot;*&quot;],</span></span><br><span class="line"><span class="comment">         [&quot;#&quot;,&quot;.&quot;,&quot;.&quot;]]</span></span><br><span class="line"><span class="comment">         </span></span><br><span class="line"><span class="comment">Constraints:</span></span><br><span class="line"><span class="comment">    m == box.length</span></span><br><span class="line"><span class="comment">    n == box[i].length</span></span><br><span class="line"><span class="comment">    1 &lt;= m, n &lt;= 500</span></span><br><span class="line"><span class="comment">    box[i][j] is either &#x27;#&#x27;, &#x27;*&#x27;, or &#x27;.&#x27;         </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p><img src="/../images/visuals.png"></p>
<h2 id="Chapter-1-I-can-do-it"><a href="#Chapter-1-I-can-do-it" class="headerlink" title="Chapter 1 - I can do it"></a>Chapter 1 - I can do it</h2><p>Dove into LeetCode editor and started coding; assumed that I could figure things out along the way, did not get far. Then I remembered a wise man talking about  <a target="_blank" rel="noopener" href="https://www.hanselman.com/blog/totally-stressed-out-sync-to-paper">syncing to paper</a>. Not surprisingly, this is the strategy that Cracking the Code Interview book suggests. Great minds think alike eh?</p>
<h2 id="Chapter-2-Boxes-and-Lines"><a href="#Chapter-2-Boxes-and-Lines" class="headerlink" title="Chapter 2 - Boxes and Lines"></a>Chapter 2 - Boxes and Lines</h2><p>Started drawing the arrays to frame the problem. A few themes appeared. Need a rotated box (transformed array) and a way to transfer the items from the original box to the rotated box. Tried to do both, got quickly overwhelmed by edge cases.<br><img src="/../images/boxes.jpg"></p>
<h2 id="Chapter-3-Break-it-down"><a href="#Chapter-3-Break-it-down" class="headerlink" title="Chapter 3 - Break it down"></a>Chapter 3 - Break it down</h2><p>Decided to break down the problem into smaller pieces.</p>
<ul>
<li>Create a rotated box</li>
<li>Move items from the original box to the rotated box</li>
<li>Apply gravity to move the stones above empty spaces</li>
</ul>
<h3 id="Chapter-4-Progress"><a href="#Chapter-4-Progress" class="headerlink" title="Chapter 4 - Progress!"></a>Chapter 4 - Progress!</h3><p>Tackling the first problem using the drawings some patterns emerged.</p>
<ul>
<li>Last row in the original box becomes the first column in the rotated box</li>
<li>Second to last row in the original box becomes the second column in the rotated box<br>…</li>
</ul>
<p>Ignoring the contents of the original box (array) wrote a function to simply rotate the box (array) and tested with different row&#x2F;column sizes.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">createRotatedBox</span> = (<span class="params">rowLength, columnLength, box</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> rotatedBox = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; rowLength; r++)&#123;</span><br><span class="line">        <span class="keyword">const</span> rowArray = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; columnLength; c++)&#123;</span><br><span class="line">            rowArray.<span class="title function_">push</span>(<span class="string">&quot;X&quot;</span>) <span class="comment">//contents don&#x27;t matter</span></span><br><span class="line">        &#125;</span><br><span class="line">        rotatedBox.<span class="title function_">push</span>(rowArray)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> rotatedBox</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Chapter-5-Moving-Day"><a href="#Chapter-5-Moving-Day" class="headerlink" title="Chapter 5 - Moving Day"></a>Chapter 5 - Moving Day</h2><p>It’s time to move the items from the original box to the rotated box. I found it difficult to map the coordinates in the original box to the coordinates in the rotated box. My plan was to write a function that would say:</p>
<ul>
<li>the item in (0, 2) in the original box will go into (2, 2) in the rotated box</li>
</ul>
<p> so I created another visual to help tease out the pattern(s)<br><img src="/../images/coords.jpg"></p>
<p>This made it easier to see the source and target coordinates of each item at a glance. That led to the following simple (in hindsight) function to get the target coordinates from the source coordinates.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getRotatedBoxIndex</span> = (<span class="params">rowIndex, columnIndex, rowLength</span>) =&gt; </span><br><span class="line">    (&#123;<span class="attr">rowIndex</span>: columnIndex, <span class="attr">columnIndex</span>: rowLength - <span class="number">1</span> - rowIndex&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Chapter-6-Gravity"><a href="#Chapter-6-Gravity" class="headerlink" title="Chapter 6 - Gravity"></a>Chapter 6 - Gravity</h2><p>The last small problem to solve was applying gravity and swapping the location of the stones if there is&#x2F;are space(s) below them.</p>
<p>My strategy was to iterate over the columns, look at the contents and swap items accordingly. Started writing down the conditions when gravity would apply</p>
<ul>
<li>if there is a stone in the column and</li>
<li>if there is a empty space below the stone</li>
<li>what if there is another empty space below that</li>
<li>…</li>
</ul>
<p>I reluctantly had to admit that recursion may be needed in this scenario i.e. for each column start from the top and swap each stone and the empty space below it.</p>
<p>It’s crucial to determine the exit conditions when dealing with recursive functions. A light bulb went off in my head while thinking about when the code should stop applying gravity (swapping items) to the column.<br>If the code iterated through all the items in the column AND did not swap anything,<br>    then we’re done with that column<br>    else applyGravity again (recurse)</p>
<p>Behold the applyGravity function that is tested separately from the rest of the code:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">applyGravity</span>= (<span class="params">items</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> swapped = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; items.<span class="property">length</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(items[i] === <span class="string">&quot;#&quot;</span> &amp;&amp; items[i+<span class="number">1</span>] === <span class="string">&quot;.&quot;</span>)&#123;</span><br><span class="line">            swapped = <span class="literal">true</span></span><br><span class="line">            <span class="keyword">let</span> temp = items[i]</span><br><span class="line">            items[i] = items[i+<span class="number">1</span>]</span><br><span class="line">            items[i+<span class="number">1</span>] = temp</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(swapped) <span class="keyword">return</span> <span class="title function_">applyGravity</span>(items)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> items</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now we have a function that can take an array of items in a column and applyGravity to that column swapping items if necessary. Therefore, the remaining steps are:</p>
<ul>
<li>Get the columns (array of items in the column) from the rotated&#x2F;populated box</li>
<li>Call applyGravity passing the items in that column (swapping items if necessary)</li>
<li>After calling applyGravity on each column, put the columns back together (rebuilding the rotated box)</li>
</ul>
<h2 id="Chapter-7-AI-all-the-things"><a href="#Chapter-7-AI-all-the-things" class="headerlink" title="Chapter 7 - AI all the things!"></a>Chapter 7 - AI all the things!</h2><p>You have been waiting patiently to see when an LLM would come into play. Well, here it is.</p>
<p>Claude prompt:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javascript function that returns an array of columns for a two dimensional array</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>response:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extractColumns</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="comment">// Check if the input is a valid 2D array</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(array) || array.<span class="property">length</span> === <span class="number">0</span> || !<span class="title class_">Array</span>.<span class="title function_">isArray</span>(array[<span class="number">0</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the number of columns based on the first row&#x27;s length</span></span><br><span class="line">    <span class="keyword">const</span> numColumns = array[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Initialize an array to store columns</span></span><br><span class="line">    <span class="keyword">const</span> columns = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: numColumns &#125;, <span class="function">() =&gt;</span> []);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Iterate through each row</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> row <span class="keyword">of</span> array) &#123;</span><br><span class="line">        <span class="comment">// Ensure the current row has the same length as the first row</span></span><br><span class="line">        <span class="keyword">if</span> (row.<span class="property">length</span> !== numColumns) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;All rows must have the same length&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Add each element to its corresponding column</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> colIndex = <span class="number">0</span>; colIndex &lt; numColumns; colIndex++) &#123;</span><br><span class="line">            columns[colIndex].<span class="title function_">push</span>(row[colIndex]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> columns;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Claude prompt:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">now write a function to return a two dimensional array from a columns array</span><br></pre></td></tr></table></figure>

<p>response:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*I&#x27;ll create a complementary function that converts an array of columns back into a two-dimensional array.*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">extractColumns</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="comment">// Check if the input is a valid 2D array</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(array) || array.<span class="property">length</span> === <span class="number">0</span> || !<span class="title class_">Array</span>.<span class="title function_">isArray</span>(array[<span class="number">0</span>])) &#123;</span><br><span class="line">        <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the number of columns based on the first row&#x27;s length</span></span><br><span class="line">    <span class="keyword">const</span> numColumns = array[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Initialize an array to store columns</span></span><br><span class="line">    <span class="keyword">const</span> columns = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: numColumns &#125;, <span class="function">() =&gt;</span> []);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Iterate through each row</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> row <span class="keyword">of</span> array) &#123;</span><br><span class="line">        <span class="comment">// Ensure the current row has the same length as the first row</span></span><br><span class="line">        <span class="keyword">if</span> (row.<span class="property">length</span> !== numColumns) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;All rows must have the same length&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Add each element to its corresponding column</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> colIndex = <span class="number">0</span>; colIndex &lt; numColumns; colIndex++) &#123;</span><br><span class="line">            columns[colIndex].<span class="title function_">push</span>(row[colIndex]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> columns;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>I know exactly what these two functions are doing but I’m too lazy to write it myself.</p>
<h3 id="Chapter-8-Will-it-work"><a href="#Chapter-8-Will-it-work" class="headerlink" title="Chapter 8 - Will it work?"></a>Chapter 8 - Will it work?</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rotateTheBox = <span class="keyword">function</span>(<span class="params">box</span>) &#123;</span><br><span class="line">    <span class="comment">// In the rotatedBox array</span></span><br><span class="line">    <span class="comment">// box&#x27;s length will be column length</span></span><br><span class="line">    <span class="comment">// subarray&#x27;s length will be row length</span></span><br><span class="line">    <span class="keyword">const</span> rotatedColumnLength = box.<span class="property">length</span></span><br><span class="line">    <span class="keyword">const</span> rotatedRowLength = box[<span class="number">0</span>].<span class="property">length</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> rotatedBox = <span class="title function_">createdRotatedBox</span>(rotatedRowLength, rotatedColumnLength)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// populate rotatedBox</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> r = <span class="number">0</span>; r &lt; box.<span class="property">length</span>; r++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> c = <span class="number">0</span>; c &lt; box[<span class="number">0</span>].<span class="property">length</span>; c++)&#123;</span><br><span class="line">            <span class="keyword">const</span> rotatedBoxIndices = <span class="title function_">getRotatedBoxIndex</span>(r, c, box.<span class="property">length</span>)</span><br><span class="line">            <span class="keyword">const</span> rowIndexInRotatedBox = rotatedBoxIndices.<span class="property">rowIndex</span></span><br><span class="line">            <span class="keyword">const</span> colIndexInRotatedBox = rotatedBoxIndices.<span class="property">columnIndex</span></span><br><span class="line"></span><br><span class="line">            rotatedBox[rowIndexInRotatedBox][colIndexInRotatedBox] = box[r][c]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> colsInRotatedBox = <span class="title function_">getColumns</span>(rotatedBox)</span><br><span class="line">    <span class="keyword">const</span> colsAfterGravity = colsInRotatedBox.<span class="title function_">map</span>(<span class="function"><span class="params">c</span> =&gt;</span> <span class="title function_">applyGravity</span>(c))</span><br><span class="line">    <span class="keyword">const</span> boxAfterGravity = <span class="title function_">columnsToArray</span>(colsAfterGravity)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> boxAfterGravity</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/../images/result.png"></p>
<p>Not bad for the first iteration.</p>
<h2 id="Afterword"><a href="#Afterword" class="headerlink" title="Afterword"></a>Afterword</h2><p>I noticed that simply breaking down the problem enabled working on each one separately reducing the mental load. The functions in the solutions are easy to read (if I may say so myself) and self-contained. Despite mutating state I think the overall solution is comprised of pure functions.</p>
<p>A happy side-effect of this strategy is that in a bigger team we can write unit tests for each of these functions and have multiple developers work on them at the same time going forward.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2024/11/29/Applied-Problem-Solving/" data-id="cm45wry56000120trelpl741s" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-waitlist" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/02/19/waitlist/" class="article-date">
  <time datetime="2022-02-19T14:29:34.000Z" itemprop="datePublished">2022-02-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/19/waitlist/">Announcing Pantry Hopper [Deprecated]</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Has this ever happened to you? </p>
<p>You’re working from home, have a meeting in 20 minutes and haven’t had lunch yet. There is not enough time so you get some fast food. You later discover plenty of lunch options at home. You start running scenarios in your head, I could have:</p>
<ul>
<li>had lunch at home</li>
<li>saved money &#x2F; gas &#x2F; environment (less waste)</li>
<li>(probably) had a healthier meal</li>
<li>…..</li>
</ul>
<p>After experiencing this for the umpteenth time, as I was throwing away fast-food trash I realized there had to be another way.<br>Out of that a new application was born.<br><a href=""><img src="/images/kostanza.jpg"></a></p>
<p>Pantry Hopper is a meal <del>tracker</del> decision application for the rest of us. It is designed to help answer questions such as “What’s for lunch?”. Pantry Hopper makes it dead simple to</p>
<ul>
<li>Bulk add items from your receipt<a href=""><img src="/images/scan.gif"></a></li>
<li>Organize using tags<a href=""><img src="/images/tags.gif"></a></li>
<li>Scan receipt, rename and tag items <a href=""><img src="/images/smart_scan.jpg"></a></li>
</ul>
<h1 id="Check-out-Pantry-Hopper-Beta"><a href="#Check-out-Pantry-Hopper-Beta" class="headerlink" title="Check out Pantry Hopper-Beta"></a>Check out <a target="_blank" rel="noopener" href="https://staging.pantryhopper.com/">Pantry Hopper-Beta</a></h1>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2022/02/19/waitlist/" data-id="cm45wry5i000l20trafqf8k6h" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pantryhopper/" rel="tag">pantryhopper</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Learning-from-failure" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/10/05/Learning-from-failure/" class="article-date">
  <time datetime="2021-10-05T15:01:43.000Z" itemprop="datePublished">2021-10-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/10/05/Learning-from-failure/">Learning from failure</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I have failed a coding challenge some time ago. It looked like a simple enough problem. However, afer struggling  to come up with an answer in the allowed time, I blew it.</p>
<p>As a software professional with about two decades of progressive experience I was disappointed. I decided to do a mini retrospective to see what I can learn from this experience; what went wrong and how I can do better next time. I skimmed through the “Cracking the Coding Interview” book in preparation for the interview. However, I still made the most common interviewing mistake. I jumped into coding too soon without formulating a solution in my head first.</p>
<p>The task looked pretty simple; write a function that converts an integer to roman numeral. I thought I had a pretty good understanding of the problem and that I would be able to come up with an algorithm on the spot. I was unable to find a pattern to code.</p>
<p>I remembered the advice to practice solving coding challenges on paper for practice and decided to give it a try. I have had good luck with what I call “table approach” where you put all the relevant variables in a table and track their values for each iteration.</p>
<p>Started with writing down the rules:</p>
<ul>
<li>M: 1000, D: 500, C: 100, L: 50, X: 10, I: 1</li>
<li>Symbols to the right increment, symbols to the left decrement</li>
<li>Max 3 consecutive roman numerals are allowed</li>
<li>Maximum number representable in roman numerals is 3999</li>
<li>0 has no equivalent symbol</li>
</ul>
<p>The last three rules were not immediately obvious before writing them down. It’s easy to see the early exit conditions. If the number is 0 or greater than 3999, there is nothing to do.</p>
<p>Here is a table that shows the roman numerals to represent numbers 1-9 in different places.</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">1000s</th>
<th align="center">100s</th>
<th>10s</th>
<th>1s</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">M</td>
<td align="center">C</td>
<td>X</td>
<td>I</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">MM</td>
<td align="center">CC</td>
<td>XX</td>
<td>II</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">MMM</td>
<td align="center">CCC</td>
<td>XXX</td>
<td>III</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">-</td>
<td align="center">CD</td>
<td>XL</td>
<td>IV</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">-</td>
<td align="center">D</td>
<td>L</td>
<td>V</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">-</td>
<td align="center">DC</td>
<td>LX</td>
<td>VI</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">-</td>
<td align="center">DCC</td>
<td>LXX</td>
<td>VII</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">-</td>
<td align="center">DCCC</td>
<td>LXXX</td>
<td>VIII</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">-</td>
<td align="center">CM</td>
<td>XC</td>
<td>IX</td>
</tr>
</tbody></table>
<p>Here is the pattern I see:</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">Pattern</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">a</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">aa</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">aaa</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">ab</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">b</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">ba</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">baa</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">baaa</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">ac</td>
</tr>
</tbody></table>
<p>Let’s code this pattern in javascript:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">convertDigit</span>(<span class="params">c, p, gp, digitNumber</span>)&#123;</span><br><span class="line">  <span class="comment">// c: current numeral</span></span><br><span class="line">  <span class="comment">// p: parent numeral</span></span><br><span class="line">  <span class="comment">// gp: grandParent numeral</span></span><br><span class="line">  <span class="keyword">let</span> digitNumberRomanNumeralTransform = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">    [<span class="number">1</span>, <span class="function">(<span class="params">c</span>) =&gt;</span> c],</span><br><span class="line">    [<span class="number">2</span>, <span class="function">(<span class="params">c</span>) =&gt;</span> c + c],</span><br><span class="line">    [<span class="number">3</span>, <span class="function">(<span class="params">c</span>) =&gt;</span> c + c + c],</span><br><span class="line">    [<span class="number">4</span>, <span class="function">(<span class="params">c, p, _</span>) =&gt;</span> c + p],</span><br><span class="line">    [<span class="number">5</span>, <span class="function">(<span class="params">_, p</span>) =&gt;</span> p],</span><br><span class="line">    [<span class="number">6</span>, <span class="function">(<span class="params">c, p</span>) =&gt;</span> p + c],</span><br><span class="line">    [<span class="number">7</span>, <span class="function">(<span class="params">c, p</span>) =&gt;</span> p + c + c],</span><br><span class="line">    [<span class="number">8</span>, <span class="function">(<span class="params">c, p</span>) =&gt;</span> p + c + c + c],</span><br><span class="line">    [<span class="number">9</span>, <span class="function">(<span class="params">c, _, gp</span>) =&gt;</span> c + gp]</span><br><span class="line">  ])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> getTransformFunc = digitNumberRomanNumeralTransform.<span class="title function_">get</span>(digitNumber)</span><br><span class="line">  <span class="keyword">const</span> result = <span class="title function_">getTransformFunc</span>(c, p, gp)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p>Every digit in an integer can be represented by 3 roman numerals:</p>
<ul>
<li>1s: I, V, X </li>
<li>10s: X, L, C</li>
<li>100s: C, D, M</li>
</ul>
<p>Sounds like a simple Map.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getDigitRomanNumeralsMap</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> digitRomanNumeralsMap = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, &#123; <span class="string">&quot;numeral&quot;</span>: <span class="string">&quot;I&quot;</span>, <span class="string">&quot;parentNumeral&quot;</span>: <span class="string">&quot;V&quot;</span>, <span class="string">&quot;grandParentNumeral&quot;</span>: <span class="string">&quot;X&quot;</span> &#125;],</span><br><span class="line">  [<span class="number">10</span>, &#123; <span class="string">&quot;numeral&quot;</span>: <span class="string">&quot;X&quot;</span>, <span class="string">&quot;parentNumeral&quot;</span>: <span class="string">&quot;L&quot;</span>, <span class="string">&quot;grandParentNumeral&quot;</span>: <span class="string">&quot;C&quot;</span> &#125;],</span><br><span class="line">  [<span class="number">100</span>, &#123; <span class="string">&quot;numeral&quot;</span>: <span class="string">&quot;C&quot;</span>, <span class="string">&quot;parentNumeral&quot;</span>: <span class="string">&quot;D&quot;</span>, <span class="string">&quot;grandParentNumeral&quot;</span>: <span class="string">&quot;M&quot;</span> &#125;],</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> digitRomanNumeralsMap</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now I can:</p>
<ul>
<li>Iterate over each digit</li>
<li>Pick the 3 roman numerals for the digit place</li>
<li>Convert each digit to roman numeral</li>
<li>Concatenate roman numerals</li>
</ul>
<p>See the code in action <a target="_blank" rel="noopener" href="https://replit.com/@asunar/Roman-Numerals">here</a>.</p>
<p>Retro time… What have I learned from this experience?</p>
<ul>
<li>Read the entire question, ask for clarification and make assumptions explicit </li>
<li>Read the entire question, ask for clarification and make assumptions explicit (not a typo) </li>
<li>Do not skip the steps above regardless of how easy the question might seem</li>
<li>Avoid multitasking, formulate a solution <em>and then</em> write the code</li>
<li>Draw a table to visualize the available data</li>
<li>Try to detect a pattern</li>
<li>Optionally write some pseudocode to mentally test the pattern</li>
<li>Write code to implement the pattern&#x2F;algorithm</li>
</ul>
<p>You’re welcome, future self.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2021/10/05/Learning-from-failure/" data-id="cm45wry53000020trb5swakcq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/interview/" rel="tag">interview</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Coupling" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/10/Coupling/" class="article-date">
  <time datetime="2020-07-10T13:53:28.000Z" itemprop="datePublished">2020-07-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/10/Coupling/">Coupling</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a part of a series of <a href="../../../../tags/ADSD/">posts</a> to document my learnings after watching Udi Dahan’s <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">Advanced Distributed Systems Design</a> course.</p>
<p>Coupling is one of the fundamental concepts that affects the maintainability of software systems as discussed <a href="../../../2020/07/09/Request-Response-to-Service-Boundaries/">before</a>.  Coupling measures how dependent are the components of the system on one another. </p>
<ul>
<li>Incoming coupling: who depends on you (aka afferent coupling)</li>
<li>Outcoming coupling: who you depend on (aka efferent coupling)</li>
</ul>
<table>
<thead>
<tr>
<th align="center">Component</th>
<th align="center">Incoming</th>
<th align="center">Outgoing</th>
<th>Comment</th>
<th>Example</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">5</td>
<td align="center">0</td>
<td>Called by many, does not call others; not necessarily bad</td>
<td>Logging library</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">0</td>
<td align="center">5</td>
<td>Calls many others, not called by others; not necessarily bad</td>
<td>UI layer code, Controllers</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">2</td>
<td align="center">2</td>
<td>Calls many others and called by many; needs investigation</td>
<td>Higher numbers: recipe for disaster</td>
</tr>
<tr>
<td align="center">D</td>
<td align="center">0</td>
<td align="center">0</td>
<td>Does not call or get called by others</td>
<td>Useless code, better deleted</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2020/07/10/Coupling/" data-id="cm45wry59000320tr1dyo6sk4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ADSD/" rel="tag">ADSD</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Request-Response-to-Service-Boundaries" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/09/Request-Response-to-Service-Boundaries/" class="article-date">
  <time datetime="2020-07-10T00:50:40.000Z" itemprop="datePublished">2020-07-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/09/Request-Response-to-Service-Boundaries/">Request/Response to Service Boundaries</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a part of a series of <a href="../../../../tags/ADSD/">posts</a> to document my learnings after watching Udi Dahan’s <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">Advanced Distributed Systems Design</a> course.</p>
<p>In this post, we will conclude our request&#x2F;response analysis. We know that request&#x2F;response may be <a href="../../../2020/06/26/Request-Response-Reliability/">unreliable</a>, <a href="../../../2020/07/02/Request-Response-Performance/">slow</a> and not <a href="../../../2020/06/29/Request-Response-Scalability/">scalable</a>. </p>
<p>However, it is not possible to completely avoid using request&#x2F;response and still build a useful software system. Is there an alternative? </p>
<p>There is good news and bad news. The good news is that we can create reliable, scalable and performant software systems by strictly adhering to the proven principles that have been around for a long time such as loose coupling (more on this later) and encapsulation.</p>
<p>The bad news is that it is challenging to adhere to the principles in the face of marketing from tech vendors and cargo cult programming (Netflix, Uber are building microservices so should we… <a target="_blank" rel="noopener" href="http://highscalability.com/blog/2020/4/8/one-team-at-uber-is-moving-from-microservices-to-macroservic.html">not so fast</a>).</p>
<blockquote style="text-align:left; line-height:1.5">
All you need to know about software:<br />Tightly coupled designs donot work.<br />Highly cohesive, encapsulated software loosely coupled from other<br />highly cohesive, encapsulated software work. <br /> 
-Udi Dahan (paraphrased)
</blockquote>

<p>It is sort of an anticlimactic reveal. You would be hard pressed to find any software developer who have not heard these terms.</p>
<p>In traditional Object Oriented Design nouns become entities, relationships between the entities lead to entity-relationship diagrams (Customer, Order, CustomerOrder etc.) and that usually leads to architectures requiring quite a bit of request&#x2F;response to do anything useful.</p>
<p>One of the issues with this approach is that we end up putting attributes that do not need to change together in the same place. In a typical Customer among other attributes object, we may see:</p>
<ul>
<li>Name</li>
<li>Date of Birth</li>
<li>Address</li>
</ul>
<p>If a customer’s name does not change when they move, name and address donot need to be stored together.</p>
<p>This understanding leads us to one of the most important aspects of the distributed systems design: <a target="_blank" rel="noopener" href="https://particular.net/webinars/finding-your-service-boundaries-a-practical-guide">Finding your service boundaries</a>. </p>
<p>In a nutshell,</p>
<ul>
<li>Design and understand user workflows</li>
<li>Determine the pieces of data needed to enable the workflows</li>
<li>Organize pieces of data into <strong>randomly named</strong> piles</li>
<li>Identify messages&#x2F;events needed for coordination between the piles</li>
<li>Name the piles (like CustomerLoyaltyService, ShippingService etc. )</li>
</ul>
<p>When teams follow this exercise they realize that the traditional singular “Customer” entity does not exist anymore. First name and last name is in this pile(service to be named later), shipping address is in that pile and loyalty status info is in that pile over there. Effectively, we have exploded the customer entity and distributed its attributes to many piles(prospective services). Ideally, these piles have an ID, customer attributes they are responsible for <strong>and nothing else</strong> so each can totally perform their respective business capability independently. That is what makes them a service.</p>
<blockquote>
<p>Service is the technical authority for a given business capability.<br>-Udi Dahan</p>
</blockquote>
<p>Note that I am oversimplifying the process here for the purposes of brevity. The process of identifying how the domain breaks down is reportedly a long, difficult and thankless process. Adam Ralph does a great job explaining the nuances in the webinar linked above. In reality, armed with the principles such as minimal request&#x2F;response and no data sharing between services (no publishing events like CustomerAddressUpdated) it is a process of trial and error.</p>
<p>These aspects of the service boundary discovery process make it challenging to provide a nice explanation with examples in a blog post. Even the most experienced software architects describe it similar to bumping around in the dark and trying to get a sense of what the shape of the world around you -maybe for days- until discovering some insight.</p>
<p>It’s no surprise then why this approach is not popular among agile teams biased towards action who prefer working software over documentation, work in sprints and timebox their “spikes”.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2020/07/09/Request-Response-to-Service-Boundaries/" data-id="cm45wry5f000f20tr2d4m3acr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Request-Response-Performance" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/02/Request-Response-Performance/" class="article-date">
  <time datetime="2020-07-03T02:40:51.000Z" itemprop="datePublished">2020-07-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/02/Request-Response-Performance/">Request/Response Performance</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a part of a series of <a href="../../../../tags/ADSD/">posts</a> to document my learnings after watching Udi Dahan’s <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">Advanced Distributed Systems Design</a> course.</p>
<p>We will focus on performance aspects of request&#x2F;response interactions. Latency and bandwidth are two important concepts that we need to understand when discussing performance.</p>
<blockquote>
<p>Latency: Time to cross the network in one direction.</p>
</blockquote>
<p>Remember that latency does not include any processing time (serialization&#x2F;deserialization of the payload). Furthermore, looking at the scaled latency chart will help us understand relative cost of remote calls.</p>
<p><a href=""><img src="/images/scaled_latency.png"></a></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> importantService = <span class="keyword">new</span> ImportantService();</span><br><span class="line"><span class="keyword">var</span> result = importantService.Process(data);</span><br></pre></td></tr></table></figure>

<p>Assuming that we’re making a remote call across the US, we can conclude that -relatively speaking- if the first line takes 1 second, the second line will take 4 years. Let that sink in for a moment.</p>
<blockquote>
<p>Bandwidth: the capacity for data transfer of an electronic communications system</p>
</blockquote>
<p>Bandwidth is not usually measured. Most developers are not even aware of the bandwidth that is available for their applications in production. Hence the fallacy: Bandwidth is unlimited. Traditionally, the amount of data processed by the software systems grew much faster than bandwidth capacity. The network will obviously affect the performance of your application. </p>
<h4 id="Example-Gigabit-internet-x3D-128mb-x2F-sec"><a href="#Example-Gigabit-internet-x3D-128mb-x2F-sec" class="headerlink" title="Example: Gigabit internet&#x3D; 128mb&#x2F;sec"></a>Example: Gigabit internet&#x3D; 128mb&#x2F;sec</h4><h4 id="Available-bandwidth-x3D-128-60-TCP-cost-serialization-cost-bigger-object-graph-xml-x3D-gt-higher-cost"><a href="#Available-bandwidth-x3D-128-60-TCP-cost-serialization-cost-bigger-object-graph-xml-x3D-gt-higher-cost" class="headerlink" title="Available bandwidth &#x3D; 128 - 60(TCP cost) - serialization_cost(bigger object graph, xml &#x3D;&gt; higher cost)"></a>Available bandwidth &#x3D; 128 - 60(TCP cost) - serialization_cost(bigger object graph, xml &#x3D;&gt; higher cost)</h4><p>Today I learned: Making remote calls can be extremely slow compared to to the rest of the application code. We can safely assume that this is going to hold true for some time.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2020/07/02/Request-Response-Performance/" data-id="cm45wry5b000520tr0iohbnvl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ADSD/" rel="tag">ADSD</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Request-Response-Scalability" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/29/Request-Response-Scalability/" class="article-date">
  <time datetime="2020-06-29T15:43:22.000Z" itemprop="datePublished">2020-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/29/Request-Response-Scalability/">Request/Response Scalability</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a part of a series of <a href="../../../../tags/ADSD/">posts</a> to document my learnings after watching Udi Dahan’s <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">Advanced Distributed Systems Design</a> course.</p>
<p>It’s time to analyze the scalability characteristics of synchronous request&#x2F;response operations as in the case of making REST&#x2F;gRPC&#x2F;Web Services to call one or more (micro)services, databases.</p>
<p>Typical scenario where the server is running a language with a Garbage Collector to free up memory (Java, .NET languages)</p>
<ul>
<li>Client sends a request to the server</li>
<li>Server receives the request</li>
<li>Memory is allocated to get info out the request, stored on the heap</li>
<li>Server sends a request to another microservice or database</li>
<li>Server waits for a response for that request</li>
<li>Garbage Collector (GC) comes (after some miliseconds) and asks: Are you done with that memory?</li>
<li>Server: Nope, still waiting</li>
<li>GC: No problem, marks memory as Gen1</li>
<li>GC comes back (after some miliseconds) and asks: Done yet?</li>
<li>Server: Nope, still waiting</li>
<li>GC: No problem, marks memory as Gen2</li>
<li>Now that memory is pinned. The only way to get it out of Gen2 is to do a global GC.Collect</li>
<li>Response comes back but GC DOES NOT clear regular memory in Gen2, just the disposables that have gone out of scope.</li>
<li>GC.Collect will freeze ALL THE THREADS while GC goes and cleans up the memory in Gen2.</li>
</ul>
<p>I was one of those people who thought that async&#x2F;await fixes this problem.</p>
<blockquote>
<p>No, it doesn’t. That just means the thread gets out of the way so you can take on another request. That actually means you’re gonna fill up faster and use more memory quicker and maybe fail quicker. It is not a solution.<br>-David Boike</p>
</blockquote>
<p>Thanks to <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">ADSD</a> course and to <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=aE-p0cfwTVU">David’s Boike’s presentation</a>, I now understand how under sufficient load, long running queries can exhaust all the memory on a web server. </p>
<p>Today I learned: In addition to being <a href="../../../../2020/06/26/Request-Response-Reliability/">unreliable</a> request&#x2F;response style interaction does not scale well under load. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2020/06/29/Request-Response-Scalability/" data-id="cm45wry5g000h20tr02fvc3dv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ADSD/" rel="tag">ADSD</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Works-on-my-machine" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/28/Works-on-my-machine/" class="article-date">
  <time datetime="2020-06-28T14:43:44.000Z" itemprop="datePublished">2020-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/28/Works-on-my-machine/">Works on my machine</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a part of a series of <a href="../../../../tags/ADSD/">posts</a> to document my learnings after watching Udi Dahan’s <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">Advanced Distributed Systems Design</a> course.</p>
<p>In the previous <a href="../../../../2020/06/26/Request-Response-Reliability">post</a>, we demonstrated the unreliability of request&#x2F;response.</p>
<p>If such a trivial example can show how unreliable request&#x2F;response <em>could</em> be, why do we continue to write similar type of code?</p>
<p>The problem is request&#x2F;response code may work in production without any issues for a long time. However, if and when the conditions are right we may receive a bug report about lost data and&#x2F;or duplicate processing etc. </p>
<ul>
<li>Unit tests pass</li>
<li>Integration tests pass</li>
<li>End to End test pass<br>(If any of these had failed, we would not have deployed to production anyways right?)</li>
</ul>
<p>At this point, we may attempt to reproduce the issue manually.<br>Most of the developers have some sort of local setup where we start up each dependent service on our machine and proceed with debugging. The services involved may be logically separate but they are not physically separate (all running on the same machine - more on this on another post). Manual test, click here and there. No dice, close the JIRA ticket with comment.</p>
<blockquote>
<p>Cannot reproduce.</p>
</blockquote>
<p>Congratulations on joining the <a target="_blank" rel="noopener" href="https://blog.codinghorror.com/the-works-on-my-machine-certification-program/">Works on my machine</a> club.</p>
<p><a href=""><img src="/images/works_on_my_machine.png" alt="Works on my machine"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2020/06/28/Works-on-my-machine/" data-id="cm45wry5h000k20tr5rv7hvqw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ADSD/" rel="tag">ADSD</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Request-Response-Reliability" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/06/26/Request-Response-Reliability/" class="article-date">
  <time datetime="2020-06-27T00:40:22.000Z" itemprop="datePublished">2020-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/06/26/Request-Response-Reliability/">Request/Response Reliability</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is a part of a series of <a href="../../../../tags/ADSD/">posts</a> to document my learnings after watching Udi Dahan’s <a target="_blank" rel="noopener" href="https://learn.particular.net/courses/adsd-online">Advanced Distributed Systems Design</a> course.</p>
<p>I reviewed the videos multiple times and took detailed notes to really internalize the principles. These are the kind of technology agnostic principles that have been around for decades and should be relevant for years to come as opposed to the intricacies of the JavaScript framework du jour.</p>
<p>Let’s set the stage by stating our end goal.</p>
<blockquote>
<p>Design and build performant, maintainable and resilient software systems where adding the 200th feature is as fast and easy as adding the first.</p>
</blockquote>
<p>We will start with reliability. Everyone knows that network is not reliable. However, we continue to write code similar to this.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = importantService.Process(data);</span><br></pre></td></tr></table></figure>

<p>Udi Dahan used timeout exception to demonstrate the reliability issues with this code snippet.</p>
<ol>
<li>Need to send some data to a remote service for a long running workflow.</li>
<li>Invoke a synchronous call and wait for response.</li>
<li>Get a timeout exception</li>
</ol>
<p> Here are some possible scenarios</p>
<ul>
<li>Data did not arrive at the server </li>
<li>Data arrived, service did not complete processing before timeout.</li>
</ul>
<p> At this point client does not know what to do; this is important data that needs to processed. </p>
<ul>
<li>Resend and risk duplicate processing? </li>
<li>Write service code to handle deduplication? What if we don’t own the service?</li>
<li>What do we tell the user? I know “An unexpected error occurred” :)</li>
</ul>
<p> The bottom line is:</p>
<blockquote>
<p>If you’re doing this on top of http, you’re always going to be almost there. There’s always going to be the scenario of this time I’ve done it. This time I finally solved all of the edge cases, and then some period of time later in production, some other thing will blow up and you’ll discover oh except that one.<br> -Udi Dahan</p>
</blockquote>
<p>Today I learned: It is very difficult to build reliable systems on top of http with request&#x2F;response (remote procedure calling-RPC, REST, Web Services etc.)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2020/06/26/Request-Response-Reliability/" data-id="cm45wry5f000e20tr6a5xf1nn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ADSD/" rel="tag">ADSD</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="title-Remote-Work" class="article article-type-title" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/15/Remote-Work/" class="article-date">
  <time datetime="2019-01-15T07:00:00.000Z" itemprop="datePublished">2019-01-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/15/Remote-Work/">Remote Work Revolution</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Remote work opportunities are on the rise. <a target="_blank" rel="noopener" href="https://www.census.gov/library/visualizations/2013/comm/home_based_workers.html">US Census Bureau</a> documented that more people are working from home.</p>
<p>The largest programming community website Stackoverflow added a remote checkbox to their jobs page recently.<br><a href=""><img src="/images/stackoverflow.png"></a></p>
<p>It is hard to ignore effects on recruiting.<br><a target="_blank" rel="noopener" href="https://asunar.github.io/images/revolution_small.png"><img src="/images/revolution_small.png" title="Revolution"></a></p>
<p>While certain companies continue to rule out remote work (Netflix, Yahoo, Slack(!)), many others are embracing it. There are also some companies that are stuck somewhere in the middle. A prime example of this is Microsoft, there are several prominent technologists working remotely for Microsoft. However, there is no obvious way to search for a remote position in Microsoft’s careers site. Does Microsoft allow remote work? It depends…</p>
<blockquote>
<p>Will the remote work trend continue or will we see companies telling employees to come back to the office (Yahoo, IBM)?</p>
</blockquote>
<p>Due to the high cost of living in major tech hubs such as the Bay Area, Seattle and New York, it is not uncommon to see compensation packages (salary, bonus and equity) for experienced IT workers reaching $400K a year. On the other hand, anectodal evidence suggests that there are plenty of IT workers located elsewhere willing to accept a smaller comp package as long as they can work remotely.</p>
<p>Let me put on my captain obvious hat for a second…</p>
<p>Given that</p>
<ul>
<li>there is a talent shortage in the tech industry</li>
<li>and it is projected to continue</li>
<li>and IT worker comp packages are reaching new highs</li>
<li>and IT worker comp packages are one of the biggest cost items in most companys’ balance sheets</li>
</ul>
<p>Then</p>
<ul>
<li>all other things being equal, remote work trend should continue to accelerate simply due to basic laws of supply and demand.</li>
</ul>
<p>There are also less obvious signs of remote work revolution like a larger company that does not allow remote work acquiring a startup that actively encourages it. Microsoft’s Github acquisition is a good example. This seems to be happening to companies of all sizes across various industries effectively reversing anti-remote work policy.</p>
<p>The prediction sounds reasonable:</p>
<blockquote>
<p>The future of work is Remote.</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://alper.tech/2019/01/15/Remote-Work/" data-id="cm45wry5a000420trf7tp1dku" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/remote/" rel="tag">remote</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ADSD/" rel="tag">ADSD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/" rel="tag">interview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pantryhopper/" rel="tag">pantryhopper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/remote/" rel="tag">remote</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ADSD/" style="font-size: 20px;">ADSD</a> <a href="/tags/interview/" style="font-size: 10px;">interview</a> <a href="/tags/pantryhopper/" style="font-size: 10px;">pantryhopper</a> <a href="/tags/remote/" style="font-size: 10px;">remote</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/11/29/Applied-Problem-Solving/">Applied Problem Solving</a>
          </li>
        
          <li>
            <a href="/2022/02/19/waitlist/">Announcing Pantry Hopper [Deprecated]</a>
          </li>
        
          <li>
            <a href="/2021/10/05/Learning-from-failure/">Learning from failure</a>
          </li>
        
          <li>
            <a href="/2020/07/10/Coupling/">Coupling</a>
          </li>
        
          <li>
            <a href="/2020/07/09/Request-Response-to-Service-Boundaries/">Request/Response to Service Boundaries</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 Alper Sunar<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>